#include "cgameworld.h"

/////////////////////////////////////////////////////////////////////////////////////
cGameWorld::cGameWorld(void)
/////////////////////////////////////////////////////////////////////////////////////
{
}

/////////////////////////////////////////////////////////////////////////////////////
cGameWorld::~cGameWorld(void)
/////////////////////////////////////////////////////////////////////////////////////
{
}

/////////////////////////////////////////////////////////////////////////////////////
bool cGameWorld::LoadMap(std::string filename)
/////////////////////////////////////////////////////////////////////////////////////
{
	if (!m_bsp.LoadMap (filename))
		return false;

	if (!m_skybox.LoadSkyBox("env/space1"))
		return false;

	return true;
}

/////////////////////////////////////////////////////////////////////////////////////
void cGameWorld::HandleCollisions(cEntity *entity)
/////////////////////////////////////////////////////////////////////////////////////
{
	entity->SetPosition(m_bsp.CheckMovement(*entity));
}

/////////////////////////////////////////////////////////////////////////////////////
void cGameWorld::DrawWorld (cCamera *camera, float deltaTime)
/////////////////////////////////////////////////////////////////////////////////////
{
	camera->Animate(deltaTime);

	// Draw the level
	m_skybox.Draw (*camera);
	m_bsp.Draw (*camera);
}